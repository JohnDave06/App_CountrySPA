<div [class]="cardClasses" (click)="onCardClick()">
  <!-- Service Image/Icon -->
  <figure class="px-3 sm:px-6 pt-3 sm:pt-6">
    <div class="relative">
      <div *ngIf="!service.image" class="text-4xl sm:text-5xl lg:text-6xl text-center">
        {{ service.icon }}
      </div>
      <img *ngIf="service.image" 
           [src]="service.image" 
           [alt]="service.name"
           class="rounded-xl w-full h-32 sm:h-40 lg:h-48 object-cover" />
      
      <!-- Favorite Button -->
      <button *ngIf="showFavoriteButton"
              class="btn btn-circle btn-xs sm:btn-sm absolute top-1 right-1 sm:top-2 sm:right-2 bg-white/80 hover:bg-white border-none"
              (click)="$event.stopPropagation(); onToggleFavorite()">
        <svg [class]="isFavorite ? 'w-3 h-3 sm:w-4 sm:h-4 text-red-500 fill-current' : 'w-3 h-3 sm:w-4 sm:h-4 text-gray-400'"
             viewBox="0 0 24 24">
          <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
        </svg>
      </button>
    </div>
  </figure>

  <!-- Card Body -->
  <div class="card-body px-3 sm:px-6 py-3 sm:py-4">
    <!-- Header -->
    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2 mb-2">
      <h2 class="card-title text-base sm:text-lg lg:text-xl">{{ service.name }}</h2>
      <div class="badge badge-primary badge-outline badge-sm sm:badge-md">{{ service.category }}</div>
    </div>

    <!-- Description -->
    <p class="text-gray-600 text-xs sm:text-sm mb-3 sm:mb-4 line-clamp-2 text-justify">{{ service.description }}</p>

    <!-- Rating (if enabled) -->
    <div *ngIf="showRating && service.rating" class="flex items-center gap-1 sm:gap-2 mb-2 sm:mb-3">
      <div class="rating rating-xs sm:rating-sm">
        <input type="radio" class="mask mask-star-2 bg-orange-400" [checked]="service.rating >= 1" disabled />
        <input type="radio" class="mask mask-star-2 bg-orange-400" [checked]="service.rating >= 2" disabled />
        <input type="radio" class="mask mask-star-2 bg-orange-400" [checked]="service.rating >= 3" disabled />
        <input type="radio" class="mask mask-star-2 bg-orange-400" [checked]="service.rating >= 4" disabled />
        <input type="radio" class="mask mask-star-2 bg-orange-400" [checked]="service.rating >= 5" disabled />
      </div>
      <span class="text-xs sm:text-sm text-gray-600">
        {{ service.rating }} <span *ngIf="service.reviews">({{ service.reviews }} reseñas)</span>
      </span>
    </div>

    <!-- Service Details -->
    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 mb-3 sm:mb-4">
      <div class="flex flex-col">
        <span class="text-lg sm:text-xl lg:text-2xl font-bold text-primary">{{ priceFormatted }}</span>
        <span class="text-xs sm:text-sm text-gray-500">{{ durationFormatted }}</span>
      </div>
      
      <div *ngIf="service.available !== undefined" 
           [class]="service.available ? 'badge badge-success badge-sm sm:badge-md' : 'badge badge-error badge-sm sm:badge-md'">
        {{ service.available ? 'Disponible' : 'No disponible' }}
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="card-actions flex-col sm:flex-row justify-between gap-2">
      <div class="flex gap-1 sm:gap-2 justify-center sm:justify-start">
        <button class="btn btn-circle btn-xs sm:btn-sm btn-ghost"
                (click)="$event.stopPropagation(); onShare()"
                title="Compartir">
          <svg class="w-3 h-3 sm:w-4 sm:h-4" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/>
          </svg>
        </button>
        
        <button class="btn btn-circle btn-xs sm:btn-sm btn-ghost"
                (click)="$event.stopPropagation(); onMoreInfo()"
                title="Más información">
          <svg class="w-3 h-3 sm:w-4 sm:h-4" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
          </svg>
        </button>
      </div>

      <button *ngIf="showBookButton"
              class="btn btn-primary btn-xs sm:btn-sm w-full sm:w-auto"
              [disabled]="service.available === false"
              (click)="$event.stopPropagation(); onBook()">
        <svg class="w-3 h-3 sm:w-4 sm:h-4 mr-1" viewBox="0 0 24 24" fill="currentColor">
          <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
        </svg>
        <span class="text-xs sm:text-sm">Reservar</span>
      </button>
    </div>
  </div>
</div>